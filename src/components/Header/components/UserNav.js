import React, { useEffect, useState } from "react"
import { Popover } from "@mui/material"
import styled from "styled-components"
import { useSelector } from "react-redux"

function UserNav({
  anchorUserMenu,
  handleClose,
  setAnchorUserMenu,
  openUserMenu,
  setUserMenu,
  idUserMenu,
}) {
  const { authCheck } = useSelector((state) => state.profileMenu)

  useEffect(() => {
    setUserMenu(false)
  }, [authCheck])
  return (
    <Popover
      id={idUserMenu}
      open={!!anchorUserMenu && openUserMenu}
      anchorEl={anchorUserMenu}
      onClose={() => {
        setUserMenu(false)
        handleClose(setAnchorUserMenu)
      }}
      anchorOrigin={{
        vertical: "bottom",
        horizontal: "left",
      }}
    >
      <WrapperUserMenu>
        <UserMenuItem>
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M26.202 27.2072C26.9391 27.0536 27.3781 26.2823 27.0118 25.6244C26.2044 24.1742 24.9323 22.8999 23.3051 21.9287C21.2094 20.6779 18.6416 20 16 20C13.3584 20 10.7906 20.6779 8.69483 21.9287C7.06758 22.8999 5.79555 24.1742 4.98811 25.6244C4.62184 26.2823 5.06082 27.0536 5.79791 27.2072C12.527 28.6095 19.4729 28.6096 26.202 27.2072Z"
              fill="#828282"
            />
            <path
              d="M22.6666 10.6667C22.6666 14.3486 19.6819 17.3333 16 17.3333C12.3181 17.3333 9.33329 14.3486 9.33329 10.6667C9.33329 6.98477 12.3181 4 16 4C19.6819 4 22.6666 6.98477 22.6666 10.6667Z"
              fill="#828282"
            />
          </svg>
          <span>Профиль</span>
        </UserMenuItem>
        <UserMenuItem>
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M9.33329 2.66675C10.0697 2.66675 10.6666 3.2637 10.6666 4.00008L10.6666 6.66675H21.3333L21.3333 4.00008C21.3333 3.2637 21.9302 2.66675 22.6666 2.66675C23.403 2.66675 24 3.2637 24 4.00008V6.66675C26.5141 6.66675 27.7712 6.66675 28.5522 7.4478C29.3333 8.22885 29.3333 9.48592 29.3333 12.0001C29.3333 12.6286 29.3333 12.9429 29.138 13.1382C28.9428 13.3334 28.6285 13.3334 28 13.3334H3.99996C3.37142 13.3334 3.05715 13.3334 2.86189 13.1382C2.66663 12.9429 2.66663 12.6286 2.66663 12.0001C2.66663 9.48592 2.66663 8.22885 3.44767 7.4478C4.22872 6.66675 5.4858 6.66675 7.99996 6.66675V4.00008C7.99996 3.2637 8.59691 2.66675 9.33329 2.66675Z"
              fill="#828282"
            />
            <path
              d="M3.44767 28.5524C2.66663 27.7713 2.66663 26.5142 2.66663 24.0001V17.3334C2.66663 16.7049 2.66663 16.3906 2.86189 16.1953C3.05715 16.0001 3.37142 16.0001 3.99996 16.0001H28C28.6285 16.0001 28.9428 16.0001 29.138 16.1953C29.3333 16.3906 29.3333 16.7049 29.3333 17.3334V24.0001C29.3333 26.5142 29.3333 27.7713 28.5522 28.5524C27.7712 29.3334 26.5141 29.3334 24 29.3334H7.99996C5.4858 29.3334 4.22872 29.3334 3.44767 28.5524Z"
              fill="#828282"
            />
          </svg>
          <span>Мои турниры</span>
        </UserMenuItem>
        <UserMenuItem>
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M6.89547 4.22885C5.33337 5.79094 5.33337 8.3051 5.33337 13.3334V18.6667C5.33337 23.6951 5.33337 26.2092 6.89547 27.7713C8.45757 29.3334 10.9717 29.3334 16 29.3334C17.702 29.3334 19.116 29.3334 20.3025 29.2728C18.1442 28.1693 16.6667 25.9239 16.6667 23.3334C16.6667 19.6515 19.6515 16.6667 23.3334 16.6667C24.5477 16.6667 25.6861 16.9914 26.6667 17.5586V13.3334C26.6667 8.3051 26.6667 5.79094 25.1046 4.22885C23.5425 2.66675 21.0284 2.66675 16 2.66675C10.9717 2.66675 8.45757 2.66675 6.89547 4.22885ZM9.33337 8.00008C9.33337 7.2637 9.93033 6.66675 10.6667 6.66675H16C16.7364 6.66675 17.3334 7.2637 17.3334 8.00008C17.3334 8.73646 16.7364 9.33342 16 9.33342H10.6667C9.93033 9.33342 9.33337 8.73646 9.33337 8.00008ZM9.33337 13.3334C9.33337 12.597 9.93033 12.0001 10.6667 12.0001H18.6667C19.4031 12.0001 20 12.597 20 13.3334C20 14.0698 19.4031 14.6667 18.6667 14.6667H10.6667C9.93033 14.6667 9.33337 14.0698 9.33337 13.3334ZM9.33337 18.6667C9.33337 17.9304 9.93033 17.3334 10.6667 17.3334H14.6667C15.4031 17.3334 16 17.9304 16 18.6667C16 19.4031 15.4031 20.0001 14.6667 20.0001H10.6667C9.93033 20.0001 9.33337 19.4031 9.33337 18.6667Z"
              fill="#828282"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M23.3334 18.6667C20.756 18.6667 18.6667 20.7561 18.6667 23.3334C18.6667 25.9107 20.756 28.0001 23.3334 28.0001C24.1371 28.0001 24.8933 27.7969 25.5535 27.4392L27.0572 28.9429C27.5779 29.4636 28.4221 29.4636 28.9429 28.9429C29.4636 28.4222 29.4636 27.578 28.9429 27.0573L27.4391 25.5535C27.7969 24.8933 28 24.1371 28 23.3334C28 20.7561 25.9107 18.6667 23.3334 18.6667ZM21.3334 23.3334C21.3334 22.2288 22.2288 21.3334 23.3334 21.3334C24.4379 21.3334 25.3334 22.2288 25.3334 23.3334C25.3334 24.438 24.4379 25.3334 23.3334 25.3334C22.2288 25.3334 21.3334 24.438 21.3334 23.3334Z"
              fill="#828282"
            />
          </svg>
          <span>Моя история</span>
        </UserMenuItem>
        <UserMenuItem>
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M28.2223 23.7777C28.2223 24.0724 28.1052 24.355 27.8969 24.5634C27.6885 24.7718 27.4059 24.8888 27.1112 24.8888H13.7778C13.4832 24.8888 13.2005 24.7718 12.9922 24.5634C12.7838 24.355 12.6667 24.0724 12.6667 23.7777C12.6667 22.0096 13.3691 20.3139 14.6193 19.0637C15.8696 17.8135 17.5653 17.1111 19.3334 17.1111H21.5556C23.3237 17.1111 25.0194 17.8135 26.2697 19.0637C27.5199 20.3139 28.2223 22.0096 28.2223 23.7777ZM20.4445 7.11108C19.5655 7.11108 18.7062 7.37175 17.9753 7.86011C17.2444 8.34847 16.6748 9.0426 16.3384 9.85471C16.002 10.6668 15.914 11.5605 16.0855 12.4226C16.2569 13.2847 16.6802 14.0767 17.3018 14.6982C17.9234 15.3198 18.7153 15.7431 19.5774 15.9146C20.4396 16.0861 21.3332 15.998 22.1453 15.6617C22.9574 15.3253 23.6516 14.7556 24.1399 14.0247C24.6283 13.2938 24.889 12.4346 24.889 11.5555C24.889 10.3768 24.4207 9.24632 23.5872 8.41283C22.7537 7.57934 21.6232 7.11108 20.4445 7.11108ZM10.4445 7.11108C9.56547 7.11108 8.70619 7.37175 7.9753 7.86011C7.24441 8.34847 6.67476 9.0426 6.33837 9.85471C6.00198 10.6668 5.91396 11.5605 6.08545 12.4226C6.25694 13.2847 6.68024 14.0767 7.3018 14.6982C7.92337 15.3198 8.7153 15.7431 9.57743 15.9146C10.4396 16.0861 11.3332 15.998 12.1453 15.6617C12.9574 15.3253 13.6516 14.7556 14.1399 14.0247C14.6283 13.2938 14.8889 12.4346 14.8889 11.5555C14.8889 10.3768 14.4207 9.24632 13.5872 8.41283C12.7537 7.57934 11.6232 7.11108 10.4445 7.11108ZM10.4445 23.7777C10.4429 22.6106 10.6728 21.4548 11.121 20.3772C11.5692 19.2996 12.2268 18.3216 13.0556 17.5C12.3773 17.2439 11.6584 17.1121 10.9334 17.1111H9.95561C8.31807 17.114 6.74843 17.7658 5.59051 18.9237C4.43258 20.0817 3.78077 21.6513 3.77783 23.2888V23.7777C3.77783 24.0724 3.8949 24.355 4.10327 24.5634C4.31164 24.7718 4.59426 24.8888 4.88894 24.8888H10.6445C10.5151 24.5325 10.4475 24.1568 10.4445 23.7777Z"
              fill="#828282"
            />
          </svg>
          <span>Мои команды</span>
        </UserMenuItem>
        <UserMenuItem>
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M18.8482 4.48197V4.48199C19.0135 6.1351 19.0961 6.96166 19.6489 7.19064C20.2017 7.41962 20.8446 6.89361 22.1305 5.84159C22.8036 5.29083 23.1402 5.01546 23.525 5.03465C23.9098 5.05384 24.214 5.35797 24.8222 5.96623L26.0338 7.17777C26.642 7.78602 26.9461 8.09015 26.9653 8.47499C26.9845 8.85982 26.7092 9.1964 26.1584 9.86955L26.1584 9.86956C25.1064 11.1554 24.5803 11.7983 24.8093 12.3511C25.0383 12.9039 25.8649 12.9866 27.518 13.1519C28.3835 13.2384 28.8162 13.2817 29.0747 13.5674C29.3333 13.8531 29.3333 14.2832 29.3333 15.1434V16.8568C29.3333 17.717 29.3333 18.1471 29.0747 18.4328C28.8162 18.7185 28.3835 18.7617 27.5182 18.8483C25.8653 19.0136 25.0388 19.0962 24.8098 19.649C24.5808 20.2018 25.1068 20.8446 26.1586 22.1302C26.7093 22.8032 26.9846 23.1398 26.9654 23.5246C26.9462 23.9094 26.6421 24.2135 26.0338 24.8218L24.8223 26.0333C24.214 26.6416 23.9099 26.9457 23.5251 26.9649C23.1402 26.9841 22.8037 26.7087 22.1305 26.158C20.8447 25.106 20.2018 24.5799 19.649 24.8089C19.0962 25.0379 19.0135 25.8646 18.8482 27.518C18.7616 28.3835 18.7183 28.8163 18.4326 29.0749C18.147 29.3334 17.7169 29.3334 16.8567 29.3334H15.1433C14.2831 29.3334 13.853 29.3334 13.5673 29.0749C13.2816 28.8163 13.2383 28.3836 13.1518 27.5181C12.9865 25.865 12.9038 25.0384 12.351 24.8095C11.7982 24.5805 11.1552 25.1065 9.86939 26.1586C9.19622 26.7093 8.85964 26.9847 8.4748 26.9655C8.08997 26.9463 7.78584 26.6422 7.17759 26.034L5.96604 24.8224C5.35779 24.2142 5.05366 23.91 5.03447 23.5252C5.01527 23.1404 5.29066 22.8038 5.84142 22.1306L5.84143 22.1306C6.89347 20.8448 7.41949 20.2019 7.19051 19.6491C6.96153 19.0962 6.13497 19.0136 4.48187 18.8483H4.48185C3.61643 18.7617 3.18372 18.7185 2.92517 18.4328C2.66663 18.1471 2.66663 17.717 2.66663 16.8568L2.66663 15.1434C2.66663 14.2832 2.66663 13.8531 2.92517 13.5674C3.18372 13.2817 3.61649 13.2384 4.48203 13.1519C6.13536 12.9865 6.96203 12.9039 7.19101 12.3511C7.41999 11.7982 6.89387 11.1552 5.84163 9.86913C5.29077 9.19586 5.01534 8.85922 5.03453 8.47438C5.05372 8.08955 5.35785 7.78542 5.9661 7.17717L7.17765 5.96562C7.7859 5.35737 8.09003 5.05324 8.47487 5.03405C8.8597 5.01485 9.19628 5.29024 9.86945 5.84101C11.1553 6.89307 11.7982 7.4191 12.351 7.19012C12.9039 6.96113 12.9865 6.1347 13.1518 4.48182C13.2383 3.6165 13.2816 3.18384 13.5673 2.9253C13.853 2.66675 14.2831 2.66675 15.1433 2.66675H16.8566C17.7169 2.66675 18.147 2.66675 18.4326 2.9253C18.7183 3.18384 18.7616 3.61655 18.8482 4.48197ZM16 21.3334C18.9455 21.3334 21.3333 18.9456 21.3333 16.0001C21.3333 13.0546 18.9455 10.6667 16 10.6667C13.0544 10.6667 10.6666 13.0546 10.6666 16.0001C10.6666 18.9456 13.0544 21.3334 16 21.3334Z"
              fill="#828282"
            />
          </svg>
          <span>Настройки</span>
        </UserMenuItem>
        <UserMenuItem>
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M10.0457 3.73518L18.4019 2.42206C21.6225 1.91597 23.2327 1.66292 24.283 2.56104C25.3333 3.45916 25.3333 5.08922 25.3333 8.34932V14.9995H16.7473L20.7808 9.95753L19.2191 8.70814L13.8858 15.3748L13.386 15.9995L13.8858 16.6242L19.2191 23.2909L20.7808 22.0415L16.7473 16.9995H25.3333V23.6497C25.3333 26.9098 25.3333 28.5398 24.283 29.438C23.2327 30.3361 21.6225 30.083 18.4019 29.5769L10.0457 28.2638C8.43294 28.0104 7.62658 27.8837 7.1466 27.3224C6.66663 26.7611 6.66663 25.9448 6.66663 24.3123V7.68668C6.66663 6.05416 6.66663 5.2379 7.1466 4.67661C7.62658 4.11532 8.43294 3.98861 10.0457 3.73518Z"
              fill="#828282"
            />
          </svg>
          <span>Выйти</span>
        </UserMenuItem>
      </WrapperUserMenu>
    </Popover>
  )
}

const UserMenuItem = styled.div`
  width: 100%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  grid-column-gap: 27px;
  padding: 20px 16px;
  border-radius: 16px;

  span {
    width: 100%;
    font-family: Inter, sans-serif;
    font-size: 18px;
    line-height: 32px;
    display: flex;
    align-items: center;
    color: #bdbdbd;
  }

  &:hover {
    background: #17171c;
    span {
      color: #ccd2e3;
    }
    svg {
      path:hover {
        fill: #ccd2e3;
      }
    }
  }
`
const WrapperUserMenu = styled.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  grid-gap: 24px;
  padding: 24px;
  position: relative;
  width: 312px;
  height: 600px;
  background: #1b1c22;
  border: 1px solid #333333;
  box-sizing: border-box;

  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.05);
  border-radius: 0 0 16px 16px;
`

export default UserNav
